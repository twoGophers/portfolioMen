/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{582:function(t,e,n){"use strict";n.r(e);var r,o,c,f=n(351),l=(n(435),n(352)),m=n(360),h=n(383),d=n(362),v="0.4.17",_=v,y="FB-PERF-TRACE-MEASURE",I="_wt_",T="_fcp",w="_fid",E="@firebase/performance/config",A="@firebase/performance/configexpire",S="Performance",M=((r={})["trace started"]="Trace {$traceName} was started before.",r["trace stopped"]="Trace {$traceName} is not running.",r["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",r["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",r["no window"]="Window is not available.",r["no app id"]="App id is not available.",r["no project id"]="Project id is not available.",r["no api key"]="Api key is not available.",r["invalid cc log"]="Attempted to queue invalid cc event",r["FB not default"]="Performance can only start when Firebase app instance is the default one.",r["RC response not ok"]="RC response is not ok",r["invalid attribute name"]="Attribute name {$attributeName} is invalid.",r["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",r["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",r["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",r),N=new m.b("performance",S,M),k=new h.b(S);k.logLevel=h.a.INFO;var O,R=function(){function t(t){if(this.window=t,!t)throw N.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(m.y)()||(k.info("IndexedDB is not supported by current browswer"),!1):(k.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var o=r[n];e(o)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===o&&(o=new t(c)),o},t}();function U(t,e){var n=t.length-e.length;if(n<0||n>1)throw N.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var P,j,B=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=U("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=U("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw N.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw N.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw N.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===O&&(O=new t),O},t}();function F(){return P}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(j||(j={}));var C=["firebase_","google_","ga_"],D=new RegExp("^[a-zA-Z]\\w*$");function L(){switch(R.getInstance().document.visibilityState){case"visible":return j.VISIBLE;case"hidden":return j.HIDDEN;default:return j.UNKNOWN}}function W(){var t=R.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var x="0.0.1",K=!0,V="FIREBASE_INSTALLATIONS_AUTH";function J(t){var e=function(){var t=R.getInstance().localStorage;if(!t)return;var e=t.getItem(A);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem(E);if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(z(e),Promise.resolve()):function(t){return(e=B.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+B.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+B.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:V+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:B.getInstance().getAppId(),app_version:_,sdk_version:x})});return fetch(r).then((function(t){if(t.ok)return t.json();throw N.create("RC response not ok")}))})).catch((function(){k.info($)}));var e}(t).then(z).then((function(t){return function(t){var e=R.getInstance().localStorage;if(!t||!e)return;e.setItem(E,JSON.stringify(t)),e.setItem(A,String(Date.now()+60*B.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}var $="Could not fetch config, will use default configs";function z(t){if(!t)return t;var e=B.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=K,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=H(e.tracesSamplingRate),e.logNetworkAfterSampling=H(e.networkRequestsSamplingRate),t}function H(t){return Math.random()<=t}var Q,G=1;function X(){var t;return G=2,Q=Q||(t=R.getInstance().document,new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))).then((function(){return(t=B.getInstance().installationsService.getId()).then((function(t){P=t})),t;var t})).then((function(t){return J(t)})).then((function(){return Y()}),(function(){return Y()}))}function Y(){G=3}var Z,tt=1e4,et=3,nt=[],it=!1;function ot(t){setTimeout((function(){var t,e;if(0!==et)return nt.length?(t=nt.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(data,t){return function(data){var t=B.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(data)})}(data).then((function(t){return t.ok||k.info("Call to Firebase backend failed."),t.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=tt;isNaN(n)||(r=Math.max(n,r));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(nt=Object(l.f)(Object(l.f)([],t),nt),k.info("Retry transport request later.")),et=3,ot(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:B.getInstance().logSource,log_event:e},t).catch((function(){nt=Object(l.f)(Object(l.f)([],t),nt),et--,k.info("Tries left: "+et+"."),ot(tt)}))):ot(tt)}),t)}function at(t){if(!t.eventTime||!t.message)throw N.create("invalid cc log");nt=Object(l.f)(Object(l.f)([],nt),[t])}function st(t,e){Z||(Z=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];at({message:t.apply(void 0,e),eventTime:Date.now()})}}(pt)),Z(t,e)}function ct(t){var e=B.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&R.getInstance().requiredApisAvailable()&&(t.isAuto&&L()!==j.VISIBLE||(3===G?ut(t):X().then((function(){return ut(t)}),(function(){return ut(t)}))))}function ut(t){if(F()){var e=B.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return st(t,1)}),0)}}function pt(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},o={application_info:ft(),network_request_metric:r},JSON.stringify(o)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:ft(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,o}function ft(){return{google_app_id:B.getInstance().getAppId(),app_instance_id:F(),web_app_info:{sdk_version:_,page_url:R.getInstance().getUrl(),service_worker_status:(t=R.getInstance().navigator,"serviceWorker"in t?t.serviceWorker.controller?2:3:1),visibility_state:L(),effective_connection_type:W()},application_process_state:0};var t}var lt=["_fp",T,w];var mt=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=R.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw N.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw N.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ct(this)},t.prototype.record=function(t,e,n){if(t<=0)throw N.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw N.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(l.a)({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var c=o[r];isNaN(Number(n.metrics[c]))||(this.counters[c]=Number(Math.floor(n.metrics[c])))}ct(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=t,c=this.name,0===o.length||o.length>100||!(c&&c.startsWith(I)&&lt.indexOf(o)>-1)&&o.startsWith("_"))throw N.create("invalid custom metric name",{customMetricName:t});var n,r,o,c;this.counters[t]=(n=e,(r=Math.floor(n))<n&&k.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||C.some((function(t){return n.startsWith(t)}))||!n.match(D)),o=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&o)this.customAttributes[t]=e;else{if(!r)throw N.create("invalid attribute name",{attributeName:t});if(!o)throw N.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(l.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var o=R.getInstance().getUrl();if(o){var c=new t(I+o,!0),f=Math.floor(1e3*R.getInstance().getTimeOrigin());c.setStartTime(f),e&&e[0]&&(c.setDuration(Math.floor(1e3*e[0].duration)),c.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),c.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),c.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var l=n.find((function(t){return"first-paint"===t.name}));l&&l.startTime&&c.putMetric("_fp",Math.floor(1e3*l.startTime));var m=n.find((function(t){return"first-contentful-paint"===t.name}));m&&m.startTime&&c.putMetric(T,Math.floor(1e3*m.startTime)),r&&c.putMetric(w,Math.floor(1e3*r))}ct(c)}},t.createUserTimingTrace=function(e){ct(new t(e,!1,e))},t}();function gt(t){var e=t;if(e&&void 0!==e.responseStart){var n=R.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),o=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,c=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=B.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==o&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return st(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:c})}}function ht(){F()&&(setTimeout((function(){return function(){var t=R.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){mt.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),mt.createOobTrace(e,n,t))}))}else mt.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=R.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){gt(r[n])}t.setupObserver("resource",gt)}()}),0),setTimeout((function(){return function(){for(var t=R.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){vt(r[n])}t.setupObserver("measure",vt)}()}),0))}function vt(t){var e=t.name;e.substring(0,y.length)!==y&&mt.createUserTimingTrace(e)}var bt,_t,yt=function(){function t(t){this.app=t,R.getInstance().requiredApisAvailable()&&Object(m.Q)().then((function(t){t&&(it||(ot(5500),it=!0),X().then(ht,ht))})).catch((function(t){k.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new mt(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return B.getInstance().instrumentationEnabled},set:function(t){B.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return B.getInstance().dataCollectionEnabled},set:function(t){B.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();bt=f.a,_t=function(t,e){if("[DEFAULT]"!==t.name)throw N.create("FB not default");if("undefined"==typeof window)throw N.create("no window");return function(t){c=t}(window),B.getInstance().firebaseAppInstance=t,B.getInstance().installationsService=e,new yt(t)},bt.INTERNAL.registerComponent(new d.a("performance",(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return _t(e,n)}),"PUBLIC")),bt.registerVersion("@firebase/performance",v)}}]);